@use '@carbon/layout';
@use '@carbon/type';
@import '~@openmrs/esm-styleguide/src/vars';

/* Ensure variables have fallback values */
$ui-01: #ffffff !default;
$ui-02: #f4f4f4 !default;
$ui-03: #dcdcdc !default;
$text-02: #525252 !default;

/* Main widget card to fill width */
.widgetCard {
  background: $ui-01;
  border: 1px solid $ui-03;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
  height: auto;
  min-height: 500px;
}

/* Ensure table container takes full width */
.tableContainer {
  width: 100%;
  max-width: 100%;
  background-color: $ui-01;
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow-x: auto !important;
}

.invoiceTable {
  width: 100% !important;
  table-layout: fixed !important;
  min-width: auto !important;
}

/* Search box styling */
.searchbox {
  margin: 8px;
  width: 300px;
}

/* Table header */
.tableHeader {
  font-weight: 600;
  padding: 0 8px;
}

/* Error container */
.errorContainer {
  margin: 16px;
  width: calc(100% - 32px);
}

/* Empty state styling */
.filterEmptyState {
  width: 100%;
  padding: 16px;
}

.filterEmptyStateTile {
  width: 100%;
  text-align: center;
  padding: 32px !important;
}

.filterEmptyStateContent {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 8px;
}

.filterEmptyStateHelper {
  font-size: 14px;
  color: $text-02;
}

/* Expandable content */
.expandedContent {
  width: 100% !important;
  max-width: 100% !important;
  padding: 8px !important; 
  overflow-x: auto !important;
}

/* Scope to this invoice table only using the invoiceTable class */
.invoiceTable :global(.cds--data-table-container),
.invoiceTable :global(.cds--table-container) {
  width: 100% !important;
  min-width: 100% !important;
  overflow-x: auto !important;
}

.invoiceTable :global(.cds--data-table),
.invoiceTable :global(.cds--data-table-header),
.invoiceTable :global(.cds--table-header-row),
.invoiceTable :global(.cds--data-table-content) {
  width: 100% !important;
}

/* Fix truncated table headers - scoped to this table */
.invoiceTable :global(.cds--table-header-label) {
  white-space: normal !important;
  overflow: visible !important;
  text-overflow: clip !important;
  padding: 0 8px !important;
  height: auto !important;
  line-height: 1.2 !important;
}

/* Apply to all header cells in this table */
.invoiceTable :global(.cds--data-table th) {
  height: auto !important;
  min-height: 48px !important;
  padding-top: 8px !important;
  padding-bottom: 8px !important;
  white-space: normal !important;
  overflow: visible !important;
  text-overflow: clip !important;
  vertical-align: middle !important;
}

/* Apply to all data cells in this table */
.invoiceTable :global(.cds--data-table td) {
  white-space: normal !important;
  overflow: visible !important;
  text-overflow: clip !important;
  height: auto !important;
  padding: 8px !important;
  min-width: 80px !important;
  vertical-align: middle !important;
}

/* Make the expand button column narrow */
.invoiceTable :global(.cds--table-expand) {
  width: 40px !important;
  min-width: 40px !important;
}

/* Amount columns - needs right alignment */
.invoiceTable :global(.cds--data-table td:nth-last-child(2)),
.invoiceTable :global(.cds--data-table td:nth-last-child(3)) {
  text-align: right !important;
}

/* Add these styles to be applied with custom classes */
.colGlobalBillId {
  min-width: 100px !important;
}

.colDate {
  min-width: 110px !important;
}

.colBillId {
  min-width: 200px !important;
  word-break: break-all !important; /* Critical for long IDs */
}

.colAmount {
  min-width: 100px !important;
  text-align: right !important;
}

.colStatus {
  min-width: 80px !important;
}

/* Expanded table content */
.expandedContent table td, 
.expandedContent table th {
  white-space: normal !important;
  overflow: visible !important;
  text-overflow: clip !important;
}

/* Make sure expanded rows don't cause horizontal scrolling */
.invoiceTable :global(.cds--table-expand__content) {
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* For mobile responsiveness */
@media (max-width: 768px) {
  .tableContainer {
    overflow-x: auto !important;
  }
}

.insuranceInfoContainer {
  position: relative;
  display: flex;
  justify-content: flex-end;
  width: 100%;
  margin-bottom: 1rem;
}
